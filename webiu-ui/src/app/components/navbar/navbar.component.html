<div class="navbar">
  <a [routerLink]="['/']" class="logo-link" (click)="preventReload($event)">
    <img
      src="../../../assets/c2silogo-dark_no_bg.png"
      alt="C2SI Logo"
      class="logo"
    />
  </a>

  @if (isMenuOpen) {
  <div
    class="menu-overlay"
    (click)="closeMenu()"
    (keydown.enter)="closeMenu()"
    (keydown.space)="closeMenu(); $event.preventDefault()"
    tabindex="0"
    role="button"
    [attr.aria-label]="'Close menu'"
  ></div>
  }
  <div
    [ngClass]="{ navbar__menu: true, open: isMenuOpen }"
    id="navbarMenu"
    (click)="$event.stopPropagation()"
    (keydown.enter)="$event.stopPropagation()"
    (keydown.space)="$event.preventDefault(); $event.stopPropagation()"
    tabindex="0"
  >
    <div
      class="navbar__menu__items"
      routerLink="/"
      [class.active]="isRouteActive('/')"
      (click)="navigateTo('/')"
      (keydown.enter)="navigateTo('/')"
      (keydown.space)="navigateTo('/'); $event.preventDefault()"
      tabindex="0"
      role="link"
      [attr.aria-label]="'Home'"
    >
      <img src="../../../assets/home.svg" alt="Home Icon" />
      <p>Home</p>
    </div>
    <div
      class="navbar__menu__items"
      routerLink="/projects"
      [class.active]="isRouteActive('/projects')"
      (click)="navigateTo('/projects')"
      (keydown.enter)="navigateTo('/projects')"
      (keydown.space)="navigateTo('/projects'); $event.preventDefault()"
      tabindex="0"
      role="link"
      [attr.aria-label]="'Projects'"
    >
      <img src="../../../assets/projects.svg" alt="Projects Icon" />
      <p>Projects</p>
    </div>
    <div
      class="navbar__menu__items"
      routerLink="/publications"
      [class.active]="isRouteActive('/publications')"
      (click)="navigateTo('/publications')"
      (keydown.enter)="navigateTo('/publications')"
      (keydown.space)="navigateTo('/publications'); $event.preventDefault()"
      tabindex="0"
      role="link"
      [attr.aria-label]="'Publications'"
    >
      <img src="../../../assets/publications.svg" alt="Publications Icon" />
      <p>Publications</p>
    </div>
    <div
      class="navbar__menu__items"
      routerLink="/contributors"
      [class.active]="isRouteActive('/contributors')"
      (click)="navigateTo('/contributors')"
      (keydown.enter)="navigateTo('/contributors')"
      (keydown.space)="navigateTo('/contributors'); $event.preventDefault()"
      tabindex="0"
      role="link"
      [attr.aria-label]="'Contributors'"
    >
      <img src="../../../assets/contributors.svg" alt="Contributors Icon" />
      <p>Contributors</p>
    </div>
    <div
      class="navbar__menu__items"
      routerLink="/community"
      [class.active]="isRouteActive('/community')"
      (click)="navigateTo('/community')"
      (keydown.enter)="navigateTo('/community')"
      (keydown.space)="navigateTo('/community'); $event.preventDefault()"
      tabindex="0"
      role="link"
      [attr.aria-label]="'Community'"
    >
      <img src="../../../assets/community.svg" alt="Community Icon" />
      <p>Community</p>
    </div>
    <div
      class="navbar__menu__items"
      routerLink="/gsoc"
      [class.active]="isRouteActive('/gsoc')"
      (click)="navigateTo('/gsoc')"
      (keydown.enter)="navigateTo('/gsoc')"
      (keydown.space)="navigateTo('/gsoc'); $event.preventDefault()"
      tabindex="0"
      role="link"
      [attr.aria-label]="'Google Summer of Code'"
    >
      <img src="../../../assets/gsoc.svg" alt="GSoC Icon" />
      <p>GSoC 26</p>
    </div>
    <div
      class="navbar__menu__items search-item"
      routerLink="/search"
      [class.active]="isRouteActive('/search')"
      (click)="navigateTo('/search')"
    >
      <div class="search-hero-icon">
        <i class="fas fa-search"></i>
      </div>
    </div>
    <button
      class="navbar__menu__items Login_Logout"
      type="button"
      (click)="toggleLoginOptions()"
    >
      <img
        [src]="
          isLoggedIn
            ? '../../../assets/logout.svg'
            : '../../../assets/login.svg'
        "
        alt="{{ isLoggedIn ? 'Logout Icon' : 'Login Icon' }}"
        class="login-logout-icon"
      />
      <p>{{ isLoggedIn ? "Logout" : "Login" }}</p>
    </button>

    @if (isLoggedIn) {
      <p>
        Welcome,<br />
        {{ user.name }}!
      </p>
    }

    @if (showLoginOptions && !isLoggedIn) {
      <div class="login-options">
        <button type="button" (click)="loginWithGoogle()">
          <img src="../../../assets/google.webp" alt="Google Icon" />
          <p>Login with Google</p>
        </button>
        <button type="button" (click)="loginWithGitHub()">
          <img src="../../../assets/community/github.png" alt="GitHub Icon" />
          <p>Login with GitHub</p>
        </button>
      </div>
    }

    <button
      class="sun-moon-toggle"
      type="button"
      aria-label="Toggle color mode"
      title="Toggle color mode"
      (click)="toggleMode()"
    >
      <div class="sun" [class.visible]="isSunVisible"></div>
      <div class="moon" [class.visible]="!isSunVisible">
        <div class="star"></div>
        <div class="star small"></div>
      </div>
    </button>
  </div>

  <div
    class="navigation__buttons"
    (click)="toggleMenu()"
    (keydown.enter)="toggleMenu()"
    (keydown.space)="toggleMenu(); $event.preventDefault()"
    tabindex="0"
    role="button"
    [attr.aria-label]="isMenuOpen ? 'Close menu' : 'Open menu'"
  >
    <div class="nav-btn">
      @if (!isMenuOpen) {
        <img src="../../../assets/ham-menu.svg" alt="Open menu" />
      }
      @if (isMenuOpen) {
        <img src="../../../assets/cross.svg" alt="Close menu" />
      }
    </div>
  </div>
</div>
