<div class="contributors-section">
  <header class="section-header">
    <h3>Contributors & Activity</h3>
    @if (!loading && contributors.length > 0) {
      <div class="community-badges">
        <span class="community-badge engagement">
          <i class="fas fa-users"></i>
          {{ contributors.length }} Contributors
        </span>
        @if (topContributorShare > 0) {
          <span class="community-badge distribution" [title]="'Top contributor: ' + topContributorShare + '% share'">
            <i class="fas fa-chart-pie"></i>
            {{ topContributorShare }}% Concentration
          </span>
        }
      </div>
    }
  </header>

  <div class="contributors-grid">
    @if (loading) {
      <div class="loading-overlay">
        <div class="skeleton-grid">
          @for (i of [1,2,3,4,5]; track i) {
            <div class="skeleton-avatar"></div>
          }
        </div>
      </div>
    } @else if (error) {
      <div class="error-state glass-card">
        <span>{{ error }}</span>
      </div>
    } @else if (contributors.length > 0) {
      <!-- Top Contributors List -->
      <div class="contributors-list-card glass-card">
        <div class="list-header">
          <h4>Top Contributors</h4>
        </div>
        <div class="contributors-scroll">
          @for (contributor of contributors | slice:0:15; track contributor.login) {
            <a [href]="contributor.html_url" target="_blank" class="contributor-item" [attr.title]="contributor.login + ': ' + contributor.contributions + ' contributions'">
              <div class="avatar-wrapper">
                <img [src]="contributor.avatar_url" [alt]="contributor.login" loading="lazy">
                <span class="contribution-count">{{ contributor.contributions }}</span>
              </div>
              <span class="username">{{ contributor.login }}</span>
            </a>
          }
        </div>
        @if (contributors.length > 15) {
          <div class="more-contributors">
            <span>+ {{ contributors.length - 15 }} more contributors</span>
          </div>
        }
      </div>

      <!-- Detail Signals -->
      <div class="signals-grid">
        <div class="signal-card glass-card">
          <span class="label">Community Size</span>
          <div class="value-row">
            <span class="value">{{ contributors.length }}</span>
            <span class="trend">Total</span>
          </div>
        </div>
        <div class="signal-card glass-card">
          <span class="label">Engagement</span>
          <div class="value-row">
            <span class="value">{{ totalContributions }}</span>
            <span class="trend">Total Commits</span>
          </div>
        </div>
      </div>
    } @else {
      <div class="empty-state glass-card">
        <p>No contributors found for this project.</p>
      </div>
    }
  </div>
</div>
